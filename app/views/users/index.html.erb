<% content_for :head do %>
  <%= tag :meta, property: "og:title", content: "Subscription for #{current_user.username}" %>
  <%= tag :meta, property: "og:image", content: "#" %>
  <%= tag :meta, property: "og:description", content: "A subscription to Friendskis" %>
  <%= tag :meta, property: "og:type", content: "fbpayment:subscription" %>
  <%= tag :meta, property: "fb:app_id", content: "386324544771493" %> 
  <%= tag :meta, property: "fbpayment:price", content: "9.99 USD" %> 
  <%= tag :meta, property: "fbpayment:alternate_price", content: "399.00 PHP" %>
  <%= tag :meta, property: "fbpayment:trial_duration", content: "2 weeks" %> 
<% end %>

<div class="span3">
  <%= render 'shared/nav' %>
</div><!-- //span3 -->

<div class="span9">
  <div id="feed">
    <h3>Showing <%= sex_preference(current_user) %> ages <%= current_user.min_age %> to <%= current_user.max_age %> near <%= current_user.location %></h3>
    
    <% @photos.each do |photo| %>
      <%= render 'feed', photo: photo %>
    <% end %>
  </div>
</div><!-- //span9 -->

<div class="modal" id="my-modal" tabindex="-1" role="dialog" style="display: none">
  <div class="modal-header">
  </div>
  <div class="modal-body">
    <%= form_for @message do |f| %>
    <%= f.hidden_field :recipients_id  %>
    <%= f.hidden_field :recipients_username  %>
    <%= f.text_area :body %>
  </div>
  <div class="modal-footer">
    <%= f.submit 'Send Message', class: 'uibutton large confirm' %>
  </div>
  <% end %>
</div>

<script>
  function showModal(e) {
    
    $('#my-modal').modal({show:true, backdrop: true});        
    $('#my-modal').find('.modal-header').html("<h3>Send a message to " + e.data('username') + "</h3>");
    
    console.log(e.data('recipients'));
    console.log(e.data('recipients-username'));
    
    
    $('#message_recipients_id').val(e.data('recipients'));
    $('#message_recipients_username').val(e.data('recipients-username'));
    
    console.log($('#message_recipients_id').val());
  }
</script>
